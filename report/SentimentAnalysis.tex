\section{Sentiment Analysis recensioni}\label{SentimentAnalysis}
La Sentiment Analysis sulle recensioni è stata affrontata sotto diversi aspetti per raggiungere tre obiettivi principali. Il primo obiettivo è stato quello di verificare la corrispondenza tra la positività individuata dal numero di stelle e la polarità ottenuta tramite un approccio basato sul lessico. Il secondo obiettivo è stato quello di capire quale fosse il sentimento medio delle 3 stelle, le quali dovrebbero corrispondere ad un voto neutro. Questo obiettivo nasce dal fatto che una recensione a 3 stelle, seppur neutra, possa presentare delle sfumature più tendenti al positivo o negativo (es: "Prodotto di qualità mediocre, ma per il prezzo che ha fa il suo lavoro... Consigliato per chi vuole spendere poco" e "Non è il massimo... ci sono alternative migliori sul mercato e non credo che lo ricomprerei." potrebbero essere recensioni da 3 stelle che esprimono sentimento diverso). Infine, come ultimo obiettivo è stato reputato interessente lo studio dell'evoluzione nel tempo del sentimento, rapportato anche all'evoluzione del numero di stelle, di alcuni prodotti d'esempio. 
\\\\
Nel seguito viene presentato il lavoro attraverso due approcci in quanto il primo (\ref{ApproccioLexiconBased}), basato sul lessico, ha portato a scarsi risultati ed è stato surclassato dall'approccio basato sul machine learning (\ref{ApproccioMachineLearning}). % NON MI PIACE STA FRASE, NON SAPEVO COME CHIUDERE INTRO E PASSARE ALLE SEZIONE SUCCESSIVE
In entrambi gli approcci l'attributo della recensione su cui viene condotta l'analisi è quello del \textit{body}. È stato inoltre deciso di etichettare come positive le recensioni con \textit{rating} > 3 e come negative quelle con \textit{rating} < 3 per poter dare una stima dell'accuratezza dei risultati ottenuti.


\subsection{Approccio Lexicon Based}\ref{ApproccioLexiconBased}
La lingua italiana del dataset porta ad avere una cerchia più ristretta di alternative per effettuare una Sentiment Analysis. \\
L'approccio che è stato adottato fa affidamento al lessico di Sentix\footnote{\url{http://valeriobasile.github.io/twita/sentix.html}}, grazie al quale è stato possibile assegnare alle recensioni una polarità ottenuta dalla somma delle singole polarità delle parole che le compongono. %TODO: dire brevemente cos'è sentix, ha diversi score, restituisce polarità [-1,1]...  mettiamo il riferimento e bona????????
\\\\
Questo metodo è stato testato su un campione casuale di 1000 recensioni etichettate come positive e 1000 come negative. Le recensioni in questione sono state estratte da un sottoinsieme attendibile, ottenuto tramite l'intersezione di quelle di acquisti verificati (\textit{verified = true}) e di quelle considerate utili da almeno un utente (\textit{helpful > 1}). Considerando come positive le recensioni con polarità > 0 e come negative quelle con polarità < 0, senza quindi considerare un range di neutre, si ottiene un'accuratezza XXX sulle positive e XXX sulle negative. %FORSE è PIU CORRETTO INCLUDERE LO 0 NELL'ESTREMO NEGATIVO???
La distribuzione delle polarità ottenute si dimostra .... 
%TODO: mostrare accuratezza e magari figura con l'andamento rating vs polarity su un paio di prodotti?
%TODO: mettere figura distribuzione valori???
\\\\
Gli scarsi risultati hanno portato a scartare l'approccio e a prenderne in considerazione uno alternativo per poter perseguire gli obiettivi preposti sulla tendenza di utilizzo delle 3 stelle e sull'andamento della polarità nel tempo.

\subsection{Approccio Machine Learning}\label{ApproccioMachineLearning}
%TODO: dire che si considera il binario, GABRI the machine learner se ha in mente premesse da fare le facci lei
%TODO: dire modello utilizzato e con che parametri eventualmente

Anche in questo caso, avendo a disposizione un numero di recensioni molto elevato, si è deciso di utilizzare il sottoinsieme filtrato su quelle che sono sia verificate che considerate utili da almeno un utente in quanto considerate più affidabili per addestrare il modello. Per bilanciare il numero di recensioni positive molto più alto di quelle negative da dare in input al modello è stato fatto undersampling ed è stato ottenuto un insieme di XXX esempi di training diviso in due tra le classi. \\
Il modello è stato addestrato tramite una 10-fold cross-validation ed ha ottenuto un'accuratezza pari a XXX, con la matrice di confusione riportata in tabella \ref{tab:matriceConfusioneModello}. \\\\
%TODO: tab:matriceConfusioneModello
%AAAAAAAAAAAAAAAA: da qui in poi i risultati che mostriamo dovremmo tirarli fuori dalle recensioni non filtrate
%TODO: confrontare andamento raggruppato per mese di qualche prodotto significativo (significativo = ha tante recensioni, quindi fa un grafico piu realistico) -> molto simili...
Con il modello ottenuto è stato poi possibile calcolare il sentimento delle recensioni su alcuni prodotti d'esempio per osservarne l'andamento nel tempo rispetto al trend delle stelle. In questo caso, per avere un insieme di valori più ampio e tracciare un grafico più, sono state considerate anche le recensioni non verificate e non marcate come utili. Dopo aver effettuato la previsione del sentimento, è stata calcolata la media dei valori raggruppati per mese e è stata tracciata la curva nel tempo. Come si può vedere in figura \ref{fig:andamentoSentimentoProdotto}, la curva del sentimento e quella del numero medio di stelle\footnote{i valori medi del numero di stelle sono stati portati in una scala di valori compresa tra 0 e 1} seguono lo stesso andamento. In questo esempio, il coefficiente di correlazione tra i valori medi raggruppati per mese è pari a XXX. \\\\
%TODO: fig:andamentoSentimentoProdotto
%TODO: calcolare un eventuale coefficiente di correlazioneee?


Come ultima cosa, è stato utilizzato il modello per verifiare il sentimento medio rispetto all'utilizzo delle 3 stelle. I risultati ottenuti mostrano come il XXX\% delle recensioni sia positivo, dimostrando quindi che non ci sia una tendenza dominante verso un sentimento.
%TODO: dire altro sulle 3 stelle?

\subsection{Individuazione topics} %FORSE NON è CORRETTO METTERLA SOTTO IL CAPITOLO SENTIMENT ANALYSIS???
%TODO:  Montamagno king of LDA